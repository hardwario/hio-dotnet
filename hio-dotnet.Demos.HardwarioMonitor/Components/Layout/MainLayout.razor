@using Services

@inherits LayoutComponentBase

@inject TooltipService TooltipService
@inject ThemeService ThemeService
@inject ConsoleService ConsoleService
@inject NavigationManager Navigation
@inject AppService AppService
@inject IJSRuntime JSRuntime

<RadzenLayout Style="grid-template-areas: 'rz-header rz-header' 'rz-sidebar rz-body' 'rz-sidebar rz-footer'">
    <RadzenHeader>
        <RadzenRow>
            <RadzenColumn>
                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0" JustifyContent="JustifyContent.Start">
                    <svg width="128" height="34" viewBox="0 0 128 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M36.9317 14.8356C36.7904 14.7056 36.7227 14.5418 36.7227 14.3441V8.07885C36.7227 7.87547 36.7904 7.70598 36.9317 7.5817C37.0729 7.45741 37.265 7.39526 37.5079 7.39526C37.7 7.39526 37.8582 7.45741 37.9881 7.58734C38.1181 7.71728 38.1802 7.88112 38.1802 8.07885V10.4855H41.7789V8.07885C41.7789 7.88677 41.8523 7.72858 41.9992 7.59299C42.1461 7.46306 42.3213 7.39526 42.5303 7.39526C42.7224 7.39526 42.8805 7.45741 43.0161 7.58734C43.1517 7.71728 43.2139 7.88112 43.2139 8.07885V14.3441C43.2139 14.5362 43.1461 14.6943 43.0161 14.8299C42.8862 14.9599 42.7224 15.0277 42.5303 15.0277C42.3382 15.0277 42.1574 14.9599 42.0049 14.8299C41.8523 14.7 41.7789 14.5362 41.7789 14.3441V11.9261H38.1802V14.3441C38.1802 14.5362 38.1181 14.6943 37.9881 14.8299C37.8582 14.9599 37.7 15.0277 37.5079 15.0277C37.265 15.0277 37.0729 14.9655 36.9317 14.8356Z" fill="white" />
                        <path d="M46.7272 15.0501C46.6085 15.0501 46.5238 15.0444 46.4617 15.0275C46.3317 14.9541 46.2244 14.858 46.1396 14.7337C46.0605 14.6094 46.021 14.4795 46.021 14.3326C46.021 14.2083 46.0492 14.084 46.1114 13.9654L49.2751 7.77361C49.3485 7.62673 49.4502 7.51374 49.5745 7.43464C49.6988 7.35555 49.8344 7.32166 49.97 7.32166C50.1055 7.32166 50.2411 7.3612 50.3598 7.43464C50.4784 7.51374 50.5744 7.62673 50.6422 7.77361L53.7551 13.9654C53.8116 14.0784 53.8455 14.1914 53.8455 14.3157C53.8455 14.5247 53.7664 14.6942 53.6082 14.8354C53.45 14.9766 53.2692 15.0444 53.0715 15.0444C52.9472 15.0444 52.8342 15.0105 52.7269 14.9428C52.6252 14.875 52.5404 14.7789 52.4727 14.6433L51.9868 13.6716H47.9136L47.439 14.6433C47.3147 14.9089 47.0774 15.0388 46.7215 15.0388L46.7272 15.0501ZM49.9587 9.50234L48.6028 12.2254H51.2072L49.9587 9.50234Z" fill="white" />
                        <path d="M57.8733 14.8525C57.7207 14.9825 57.5456 15.0503 57.3479 15.0503C57.1501 15.0503 56.9806 14.9881 56.8394 14.8638C56.6982 14.7395 56.6304 14.5644 56.6304 14.3328V8.06755C56.6304 7.87547 56.6925 7.71728 56.8225 7.58734C56.9524 7.45741 57.1049 7.39526 57.2914 7.39526H60.2234C60.7375 7.39526 61.1838 7.5139 61.5623 7.74553C61.9408 7.97716 62.229 8.28788 62.421 8.67204C62.6131 9.0562 62.7148 9.45731 62.7148 9.88667C62.7148 10.3669 62.5905 10.8019 62.3476 11.1973C62.099 11.5928 61.7375 11.8866 61.2629 12.0786L62.7318 13.8639C62.8335 14.0164 62.8843 14.1746 62.8843 14.3384C62.8843 14.5362 62.8109 14.7056 62.6696 14.8412C62.5284 14.9768 62.3533 15.0446 62.1555 15.0446C61.8956 15.0446 61.6753 14.926 61.4945 14.6943L59.828 12.3103H58.0936V14.3045C58.0936 14.5305 58.0201 14.7113 57.8676 14.8469L57.8733 14.8525ZM60.2291 11.0448C60.5737 11.0448 60.8449 10.9262 61.0426 10.6945C61.2403 10.4573 61.342 10.1861 61.342 9.86972C61.342 9.55335 61.246 9.29348 61.0482 9.0675C60.8505 8.84152 60.5793 8.72853 60.2291 8.72853H58.0992V11.0448H60.2291Z" fill="white" />
                        <path d="M66.1933 14.8582C66.0407 14.7452 65.9673 14.5757 65.9673 14.3441V8.07885C65.9673 7.88677 66.0464 7.72858 66.2046 7.59299C66.3627 7.45741 66.5379 7.39526 66.73 7.39526H69.2553C70.0575 7.39526 70.7411 7.57605 71.306 7.93761C71.871 8.29917 72.2947 8.76808 72.5828 9.34997C72.8653 9.93186 73.0065 10.5533 73.0065 11.2143C73.0065 11.8753 72.8653 12.4967 72.5884 13.0786C72.306 13.6605 71.8935 14.1294 71.3399 14.491C70.7863 14.8525 70.1253 15.0333 69.3513 15.0333H66.7243C66.5209 15.0333 66.3401 14.9768 66.1876 14.8638L66.1933 14.8582ZM67.4248 13.6831H69.2553C69.7355 13.6831 70.1479 13.5645 70.4925 13.3272C70.8371 13.0899 71.097 12.7792 71.2778 12.395C71.4529 12.0109 71.5433 11.6041 71.5433 11.1691C71.5433 10.7341 71.4585 10.3556 71.2834 9.98271C71.1083 9.60984 70.8541 9.31042 70.5038 9.08445C70.1592 8.85847 69.7411 8.74548 69.2553 8.74548H67.4248V13.6887V13.6831Z" fill="white" />
                        <path d="M83.8825 12.395L85.5265 7.8472C85.5942 7.68336 85.6846 7.56472 85.8033 7.47998C85.9219 7.39524 86.0519 7.35004 86.1987 7.35004C86.3908 7.35004 86.5547 7.41219 86.7015 7.54213C86.8428 7.67206 86.9162 7.8359 86.9162 8.03363C86.9162 8.12402 86.8993 8.22006 86.8597 8.33305L84.6734 14.2593C84.5774 14.57 84.4757 14.7847 84.3627 14.8977C84.2497 15.0163 84.1028 15.0728 83.9107 15.0728C83.7356 15.0728 83.6 15.0276 83.5096 14.9372C83.4192 14.8469 83.3062 14.6774 83.1706 14.4344L81.2498 10.0787L79.4194 14.3723C79.3064 14.6209 79.1991 14.8073 79.0804 14.9259C78.9675 15.0446 78.8149 15.1011 78.6341 15.1011C78.4534 15.1011 78.3008 15.0389 78.1878 14.9203C78.0748 14.796 77.9675 14.6096 77.8715 14.3497L75.7303 8.3387C75.6908 8.22571 75.6738 8.13532 75.6738 8.05057C75.6738 7.8359 75.7473 7.66641 75.8942 7.54213C76.041 7.41784 76.2162 7.35569 76.4139 7.35569C76.5608 7.35569 76.6964 7.40089 76.8207 7.48563C76.945 7.57037 77.0353 7.69466 77.0862 7.85284L78.7189 12.4006L80.6736 7.85284C80.7414 7.68901 80.8318 7.56472 80.9448 7.47433C81.0577 7.38394 81.1764 7.33875 81.3007 7.33875C81.425 7.33875 81.5436 7.37829 81.6509 7.46303C81.7583 7.54777 81.8487 7.66641 81.9165 7.8246L83.8712 12.4006L83.8825 12.395Z" fill="white" />
                        <path d="M89.3805 15.0501C89.2619 15.0501 89.1771 15.0444 89.115 15.0275C88.985 14.9541 88.8777 14.858 88.793 14.7337C88.7139 14.6094 88.6743 14.4795 88.6743 14.3326C88.6743 14.2083 88.7026 14.084 88.7647 13.9654L91.9284 7.77361C92.0018 7.62673 92.1035 7.51374 92.2278 7.43464C92.3521 7.35555 92.4877 7.32166 92.6233 7.32166C92.7589 7.32166 92.8945 7.3612 93.0131 7.43464C93.1317 7.51374 93.2278 7.62673 93.2956 7.77361L96.4084 13.9654C96.4649 14.0784 96.4988 14.1914 96.4988 14.3157C96.4988 14.5247 96.4197 14.6942 96.2615 14.8354C96.1033 14.9766 95.9226 15.0444 95.7248 15.0444C95.6005 15.0444 95.4875 15.0105 95.3802 14.9428C95.2785 14.875 95.1938 14.7789 95.126 14.6433L94.6401 13.6716H90.5669L90.0923 14.6433C89.968 14.9089 89.7308 15.0388 89.3749 15.0388L89.3805 15.0501ZM92.612 9.50234L91.2561 12.2254H93.8605L92.612 9.50234Z" fill="white" />
                        <path d="M100.527 14.8525C100.374 14.9825 100.199 15.0503 100.001 15.0503C99.8034 15.0503 99.634 14.9881 99.4927 14.8638C99.3515 14.7395 99.2837 14.5644 99.2837 14.3328V8.06755C99.2837 7.87547 99.3458 7.71728 99.4758 7.58734C99.6057 7.45741 99.7582 7.39526 99.9447 7.39526H102.877C103.391 7.39526 103.837 7.5139 104.216 7.74553C104.594 7.97716 104.882 8.28788 105.074 8.67204C105.266 9.0562 105.368 9.45731 105.368 9.88667C105.368 10.3669 105.244 10.8019 105.001 11.1973C104.752 11.5928 104.391 11.8866 103.916 12.0786L105.385 13.8639C105.487 14.0164 105.538 14.1746 105.538 14.3384C105.538 14.5362 105.464 14.7056 105.323 14.8412C105.182 14.9768 105.007 15.0446 104.809 15.0446C104.549 15.0446 104.329 14.926 104.148 14.6943L102.481 12.3103H100.747V14.3045C100.747 14.5305 100.673 14.7113 100.521 14.8469L100.527 14.8525ZM102.882 11.0448C103.227 11.0448 103.498 10.9262 103.696 10.6945C103.894 10.4573 103.995 10.1861 103.995 9.86972C103.995 9.55335 103.899 9.29348 103.702 9.0675C103.504 8.84152 103.233 8.72853 102.882 8.72853H100.753V11.0448H102.882Z" fill="white" />
                        <path d="M108.695 8.05609C108.695 7.84141 108.769 7.67193 108.916 7.54764C109.063 7.42335 109.238 7.36121 109.435 7.36121C109.633 7.36121 109.803 7.42335 109.944 7.54199C110.085 7.66628 110.153 7.83576 110.153 8.05609V14.3552C110.153 14.5755 110.079 14.745 109.938 14.8693C109.797 14.988 109.622 15.0501 109.413 15.0501C109.221 15.0501 109.057 14.988 108.91 14.8693C108.769 14.745 108.695 14.5755 108.695 14.3552V8.05609Z" fill="white" />
                        <path d="M120.926 13.3155C120.547 13.9143 120.056 14.3663 119.452 14.677C118.847 14.9877 118.214 15.1402 117.542 15.1402C116.836 15.1685 116.164 15.0329 115.531 14.7391C114.892 14.4397 114.378 13.9878 113.983 13.3776C113.587 12.7675 113.39 12.0331 113.39 11.1687C113.39 10.3043 113.587 9.57555 113.983 8.95976C114.378 8.34397 114.898 7.89202 115.531 7.5813C116.169 7.27058 116.836 7.11804 117.542 7.11804C118.22 7.15759 118.858 7.33272 119.463 7.64909C120.067 7.96546 120.553 8.42306 120.932 9.0219C121.305 9.62074 121.497 10.3382 121.497 11.1687C121.497 11.9992 121.305 12.7166 120.926 13.3155ZM119.666 9.74503C119.412 9.34957 119.084 9.05015 118.683 8.85242C118.282 8.65469 117.864 8.553 117.418 8.553C116.971 8.553 116.582 8.65469 116.18 8.85242C115.779 9.05015 115.457 9.34957 115.209 9.74503C114.96 10.1405 114.836 10.615 114.836 11.1687C114.836 11.7223 114.96 12.1912 115.209 12.5867C115.457 12.9822 115.785 13.2759 116.18 13.4793C116.576 13.6827 116.988 13.7844 117.418 13.7844C117.847 13.7844 118.282 13.6827 118.683 13.4793C119.084 13.2759 119.412 12.9822 119.666 12.5867C119.92 12.1912 120.045 11.7223 120.045 11.1687C120.045 10.615 119.92 10.1405 119.666 9.74503Z" fill="white" />
                        <path d="M3.0507 0C1.36716 0 0 1.36716 0 3.0507C0 4.33877 0.819169 5.49126 2.0338 5.92061V13.5587C2.0338 14.118 2.4914 14.5756 3.0507 14.5756C3.15804 14.5756 3.25973 14.5586 3.36142 14.5247L11.1407 12.0164C11.7169 12.7734 12.6096 13.214 13.5587 13.2197C15.2422 13.2197 16.6094 11.8525 16.6094 10.169C16.6094 8.48546 15.2422 7.1183 13.5587 7.1183C11.909 7.1183 10.5588 8.43462 10.5136 10.0843L4.0676 12.1632V5.92061C5.28223 5.49126 6.09575 4.34442 6.1014 3.0507C6.1014 1.36716 4.73423 0 3.0507 0Z" fill="white" />
                        <path d="M24.0655 33.8966C25.749 33.8966 27.1162 32.5294 27.1162 30.8459C27.1162 29.5578 26.297 28.4053 25.0824 27.976V20.3379C25.0824 19.7786 24.6248 19.321 24.0655 19.321C23.9582 19.321 23.8565 19.338 23.7548 19.3719L15.9755 21.8802C15.3993 21.1232 14.5066 20.6826 13.5575 20.6769C11.874 20.6769 10.5068 22.0441 10.5068 23.7276C10.5068 25.4111 11.874 26.7783 13.5575 26.7783C15.2072 26.7783 16.5574 25.462 16.6026 23.8124L23.0486 21.7334V27.976C21.834 28.4053 21.0204 29.5522 21.0148 30.8459C21.0148 32.5294 22.382 33.8966 24.0655 33.8966Z" fill="white" />
                        <path d="M24.0666 0C22.3831 0 21.0159 1.36716 21.0159 3.0507C21.0159 4.34442 21.8294 5.49691 23.0497 5.92626V12.8186L2.73998 19.3719C2.32192 19.5075 2.0338 19.8973 2.03945 20.338V27.9704C0.813519 28.3997 0 29.5522 0 30.8459C0 32.5295 1.36716 33.8966 3.0507 33.8966C4.73423 33.8966 6.1014 32.5295 6.1014 30.8459C6.1014 29.5522 5.28788 28.3997 4.0676 27.9704V21.0781L24.3773 14.5247C24.7954 14.3891 25.0835 13.9993 25.0835 13.5587V5.92061C26.2981 5.49126 27.1173 4.33877 27.1173 3.04505C27.1173 1.36716 25.7502 0 24.0666 0Z" fill="white" />
                        <path d="M37.4588 18.8176H39.9557C41.3598 18.8176 42.6234 19.7587 42.6234 21.5612C42.6234 23.2688 41.3598 24.2175 39.9557 24.2175H38.1495V25.6443C38.1495 26.1186 37.8459 26.388 37.4588 26.388C37.1021 26.388 36.7227 26.1186 36.7227 25.6443V19.5614C36.7227 19.2047 37.0035 18.8176 37.4588 18.8176ZM38.1495 22.8704H39.9557C40.6805 22.8704 41.2535 22.2329 41.2535 21.5612C41.2535 20.806 40.6805 20.1799 39.9557 20.1799H38.1495V22.8704Z" fill="white" />
                        <path d="M45.6011 19.5616C45.6011 19.2049 45.9046 18.9014 46.2803 18.9014C46.6256 18.9014 46.9178 19.2049 46.9178 19.5616V24.9729H49.8549C50.9136 24.9729 50.9364 26.3883 49.8549 26.3883H46.2803C45.9009 26.3883 45.6011 26.1189 45.6011 25.728V19.5616Z" fill="white" />
                        <path d="M53.4563 26.3918C53.111 26.1983 52.8947 25.8075 53.111 25.3559L56.2113 19.292C56.5035 18.719 57.2814 18.6962 57.5508 19.292L60.598 25.3521C61.0419 26.1945 59.7328 26.8662 59.3457 26.02L58.8714 25.0713H54.8832L54.4202 26.02C54.2456 26.388 53.8472 26.4639 53.4601 26.388L53.4563 26.3918ZM56.883 20.9768L55.5548 23.6445H58.1048L56.883 20.9768Z" fill="white" />
                        <path d="M63.5807 19.1631L65.5692 22.1229L67.5879 19.1631C68.1609 18.3738 69.3373 19.1631 68.7757 19.8878L66.2484 23.4852V25.7127C66.3471 26.6538 64.8216 26.6538 64.8216 25.7127V23.4852L62.3702 19.9296C61.7859 19.2048 63.0077 18.3738 63.5807 19.1631Z" fill="white" />
                        <path d="M77.8406 25.5572C77.0741 26.1947 76.133 26.4641 75.1843 26.4641C72.9151 26.4641 71.3062 25.1663 71.3062 22.5973C71.3062 20.4153 73.0024 18.7191 75.283 18.7191C76.1368 18.7191 77.0779 19.0113 77.7457 19.6716C78.406 20.3205 77.4536 21.2805 76.8047 20.7075C76.4062 20.3167 75.8446 20.0283 75.283 20.0283C73.9738 20.0283 72.7102 21.0756 72.7102 22.6011C72.7102 24.1987 73.7689 25.1739 75.1843 25.1739C75.8446 25.1739 76.4062 24.9804 76.8047 24.6882V23.36H75.1843C74.2243 23.36 74.3191 22.0433 75.1843 22.0433H77.3435C77.742 22.0433 78.11 22.3468 78.11 22.6808V24.9804C78.11 25.1739 78.0228 25.3598 77.8406 25.5647V25.5572Z" fill="white" />
                        <path d="M81.5127 25.7089V19.5729C81.5127 19.1934 81.8049 18.9126 82.1616 18.9126H85.0342C87.7777 18.9126 88.3393 22.5859 86.0511 23.5042L87.4893 25.2535C88.0509 26.0846 86.9277 26.8852 86.2788 26.0656L84.6471 23.7319H82.9509V25.6861C82.9509 26.6272 81.5127 26.6576 81.5127 25.7089ZM85.0342 22.4872C86.4382 22.4872 86.5255 20.218 85.0342 20.218H82.9471V22.4872H85.0342Z" fill="white" />
                        <path d="M94.456 26.4981C92.4562 26.5854 90.3843 25.2572 90.3843 22.6085C90.3843 19.9598 92.46 18.6431 94.456 18.6431C96.3457 18.7417 98.3228 20.0471 98.3228 22.6085C98.3228 25.1699 96.3457 26.4981 94.456 26.4981ZM94.3383 20.0471C93.1278 20.0471 91.8111 20.9009 91.8111 22.6085C91.8111 24.3161 93.1278 25.1699 94.3383 25.1699C95.5489 25.1699 96.9111 24.3047 96.9111 22.6085C96.9111 20.9123 95.583 20.0471 94.3383 20.0471Z" fill="white" />
                        <path d="M106.566 19.6261C106.566 18.666 107.981 18.5901 107.981 19.6261V23.5384C107.981 27.5798 101.466 27.5798 101.466 23.5384V19.6261C101.466 18.6547 102.881 18.6091 102.881 19.6261V23.5384C102.881 25.6672 106.566 25.7963 106.566 23.5384V19.6261Z" fill="white" />
                        <path d="M111.332 19.6714C111.332 19.2806 111.42 18.9049 111.981 18.9049C112.368 18.9049 112.456 19.0036 112.748 19.2844L116.322 23.7583V19.5614C116.322 19.2047 116.637 18.8176 117.002 18.8176C117.389 18.8176 117.768 19.2085 117.768 19.5614V25.6443C117.768 26.1186 117.476 26.3046 117.195 26.388C116.816 26.388 116.634 26.3008 116.319 26.0086L112.744 21.4701V25.6405C112.744 26.1148 112.452 26.3842 112.065 26.3842C111.678 26.3842 111.329 26.1148 111.329 25.6405V19.6714H111.332Z" fill="white" />
                        <path d="M121.106 25.7203V19.5842C121.106 19.1972 121.494 18.9164 121.85 18.9164H124.324C129.261 18.9164 129.155 26.3919 124.423 26.3919H121.85C121.494 26.3919 121.106 26.1984 121.106 25.7203ZM122.533 25.0714H124.328C127.246 25.0714 127.375 20.2293 124.328 20.2293H122.533V25.0714Z" fill="white" />
                    </svg>
                </RadzenStack>
            </RadzenColumn>
            <RadzenColumn>
                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.End">
                    <RadzenButton 
                    Icon="@(isDark ? "dark_mode" : "light_mode")" 
                    Style="background: none; border: none; cursor: pointer;" 
                    Click="@ToggleTheme" 
                    Size="ButtonSize.Small"
                    Title="Toggle theme"
                    />
                </RadzenStack>
            </RadzenColumn>
        </RadzenRow>
    </RadzenHeader>
    <RadzenSidebar Responsive="false" Style="width: max-content;height:100%; background-color: #252532;border-top-right-radius: 10px;">
        <RadzenStack Orientation="Orientation.Vertical" Style="height:100%;">
            <RadzenRow>
                <RadzenColumn Style="height:100%;">
                    <RadzenPanelMenu DisplayStyle="@(sidebarExpanded ? MenuItemDisplayStyle.IconAndText : MenuItemDisplayStyle.Icon)" ShowArrow="false">
                        <RadzenButton Click="@sidebarToggle" class="sidebar-toggle-button">
                            <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15.5 19.0312C15.5 19.5318 15.9057 19.9375 16.4062 19.9375C16.9068 19.9375 17.3125 19.5318 17.3125 19.0312V1.96875C17.3125 1.46824 16.9068 1.0625 16.4062 1.0625C15.9057 1.0625 15.5 1.46824 15.5 1.96875L15.5 19.0312ZM12.4688 11.4063C12.9693 11.4063 13.375 11.0005 13.375 10.5C13.375 9.99949 12.9693 9.59375 12.4688 9.59375L5.46913 9.59375L7.85957 7.20332C8.21348 6.8494 8.21348 6.2756 7.85957 5.92168C7.50565 5.56777 6.93185 5.56777 6.57793 5.92168L2.64043 9.85918C2.28652 10.2131 2.28652 10.7869 2.64043 11.1408L6.57793 15.0783C6.93185 15.4322 7.50565 15.4322 7.85957 15.0783C8.21348 14.7244 8.21348 14.1506 7.85957 13.7967L5.46913 11.4063L12.4688 11.4063Z" fill="white" stroke="white" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </RadzenButton>
                        <RadzenPanelMenuItem Text="Home" Icon="home" Path="/" MouseEnter="@(args => ShowTooltip(args, new TooltipOptions() { Text = "Home", Position = TooltipPosition.Right }) )" />
                        <RadzenPanelMenuItem Text="Graph" Icon="monitoring" Path="/graph" MouseEnter="@(args => ShowTooltip(args, new TooltipOptions() { Text = "Counter", Position = TooltipPosition.Right }) )" />
                        <RadzenPanelMenuItem Text="Configs" Icon="manufacturing" Path="/configs" MouseEnter="@(args => ShowTooltip(args, new TooltipOptions() { Text = "Configs", Position = TooltipPosition.Right }) )" />
                        <RadzenPanelMenuItem Text="Cloud" Icon="cloud" Path="/hiocloud" MouseEnter="@(args => ShowTooltip(args, new TooltipOptions() { Text = "Cloud", Position = TooltipPosition.Right }) )" />
                        <RadzenPanelMenuItem Text="ThingsBoard" Icon="table" Path="/thingsboard" MouseEnter="@(args => ShowTooltip(args, new TooltipOptions() { Text = "ThingsBoard", Position = TooltipPosition.Right }) )" />
                    </RadzenPanelMenu>
                </RadzenColumn>
            </RadzenRow>
            @if (sidebarExpanded)
            {
                <RadzenRow Style="height:100%;">
                    <RadzenColumn Style="height:100%;">
                        <RadzenStack Style="height: 100%;" Orientation="Orientation.Horizontal" AlignItems="AlignItems.End" JustifyContent="JustifyContent.Center">
                            <RadzenText Text="@GetVersion()" />
                        </RadzenStack>
                    </RadzenColumn>
                </RadzenRow>
            }
        </RadzenStack>
    </RadzenSidebar>
    <RadzenBody Style="padding:0px;">
        @Body
    </RadzenBody>
    <RadzenFooter>
        <Footer @ref=footerRef />
    </RadzenFooter>
</RadzenLayout>

<RadzenComponents />

@code {
    bool sidebarExpanded = true;
    Footer? footerRef;

    bool isDark = true;

    protected override void OnInitialized()
    {
        ThemeService.SetTheme("material-dark");
    }

    protected override async Task OnParametersSetAsync()
    {
        await JSRuntime.InvokeVoidAsync("toggleThemeStyleSheet", isDark);
        ConsoleService.LoadCommandsFromStatic();
        AppService.RegisterHioCloudDefaultLogin();
    }

    private async Task ToggleTheme()
    {
        isDark = !isDark;
        var newTheme = isDark ? "material-dark" : "material";
        ThemeService.SetTheme(newTheme);
        await JSRuntime.InvokeVoidAsync("toggleThemeStyleSheet", isDark);
        StateHasChanged();
    }

    public string GetVersion()
    {
        return $"Version: {MainDataContext.Config.AppVersion}";
    }

    private async Task sidebarToggle()
    {
        sidebarExpanded = !sidebarExpanded;
    }

    void ShowTooltip(ElementReference elementReference, TooltipOptions options = null)
    {
        if (!sidebarExpanded)
        {
            TooltipService.Open(elementReference, options.Text, options);
        }
    }
}