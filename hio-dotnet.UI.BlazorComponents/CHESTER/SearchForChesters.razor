@using hio_dotnet.UI.BlazorComponents.Basics.Frames
@using hio_dotnet.UI.BlazorComponents.Basics.Buttons
@using hio_dotnet.UI.BlazorComponents.Basics

<Row>
    <Column>
        <Row>
            <Column>
                <Button Variant="Color.Primary" OnClick="() => OnStartSearch.InvokeAsync()">Search</Button>
            </Column>
        </Row>
    </Column>
</Row>

@if (Chesters.Count > 0)
{
    <Row>
        <Column>
            <h5>Chesters</h5>
            <hr />

            <Row>
                <Column>
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var chester in Chesters)
                            {
                                <tr>
                                    <td>@chester</td>
                                    <td>
                                        <Button Variant="Color.Primary" OnClick="() => OnConnectToChester.InvokeAsync(chester)">Connect</Button>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </Column>
            </Row>
        </Column>
    </Row>
}

@code {
    [Parameter] public EventCallback<string> OnStartSearch { get; set; }
    [Parameter] public EventCallback<string> OnConnectToChester { get; set; }
    private List<string> Chesters { get; set; } = new List<string>();

    public async Task LoadChesters(List<string> chesters)
    {
        Chesters = chesters;
        await InvokeAsync(StateHasChanged);
    }
}
